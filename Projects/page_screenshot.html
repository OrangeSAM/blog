<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网页截图的两种方式 | 刘一笔的博客</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/logo.jpg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/logo.jpg">
    <link rel="mask-icon" href="/logo.jpg" color="#3eaf7c">
    <meta name="description" content="博客，日常记录，JavaScript，CSS，LeetCode，Node，HTTP">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.jpg">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.166fb109.css" as="style"><link rel="preload" href="/assets/js/app.43ad61d0.js" as="script"><link rel="preload" href="/assets/js/2.1fc9df47.js" as="script"><link rel="preload" href="/assets/js/152.1f405d78.js" as="script"><link rel="preload" href="/assets/js/5.cfe5c241.js" as="script"><link rel="prefetch" href="/assets/js/10.d502310f.js"><link rel="prefetch" href="/assets/js/100.fb239a89.js"><link rel="prefetch" href="/assets/js/101.2151c006.js"><link rel="prefetch" href="/assets/js/102.1d702054.js"><link rel="prefetch" href="/assets/js/103.40f30f75.js"><link rel="prefetch" href="/assets/js/104.0c98162d.js"><link rel="prefetch" href="/assets/js/105.6e0c095d.js"><link rel="prefetch" href="/assets/js/106.a481ff60.js"><link rel="prefetch" href="/assets/js/107.0783e2c8.js"><link rel="prefetch" href="/assets/js/108.ce66c64a.js"><link rel="prefetch" href="/assets/js/109.16240db3.js"><link rel="prefetch" href="/assets/js/11.f34148d5.js"><link rel="prefetch" href="/assets/js/110.e46cbc35.js"><link rel="prefetch" href="/assets/js/111.dfac0e9b.js"><link rel="prefetch" href="/assets/js/112.3973a710.js"><link rel="prefetch" href="/assets/js/113.10cda74f.js"><link rel="prefetch" href="/assets/js/114.9e0290ae.js"><link rel="prefetch" href="/assets/js/115.3a271f51.js"><link rel="prefetch" href="/assets/js/116.571094ba.js"><link rel="prefetch" href="/assets/js/117.01a63c82.js"><link rel="prefetch" href="/assets/js/118.4898e441.js"><link rel="prefetch" href="/assets/js/119.1740072a.js"><link rel="prefetch" href="/assets/js/12.92a55c81.js"><link rel="prefetch" href="/assets/js/120.111c8e5c.js"><link rel="prefetch" href="/assets/js/121.22040bfe.js"><link rel="prefetch" href="/assets/js/122.fcaf893c.js"><link rel="prefetch" href="/assets/js/123.c50ee978.js"><link rel="prefetch" href="/assets/js/124.1a4447f8.js"><link rel="prefetch" href="/assets/js/125.21354032.js"><link rel="prefetch" href="/assets/js/126.94890a16.js"><link rel="prefetch" href="/assets/js/127.7e9de262.js"><link rel="prefetch" href="/assets/js/128.eedd7b15.js"><link rel="prefetch" href="/assets/js/129.03f3a9f7.js"><link rel="prefetch" href="/assets/js/13.02504181.js"><link rel="prefetch" href="/assets/js/130.1fabec0c.js"><link rel="prefetch" href="/assets/js/131.88ee5eb5.js"><link rel="prefetch" href="/assets/js/132.914fe876.js"><link rel="prefetch" href="/assets/js/133.eb8a5c8d.js"><link rel="prefetch" href="/assets/js/134.64ed3d32.js"><link rel="prefetch" href="/assets/js/135.50145a1f.js"><link rel="prefetch" href="/assets/js/136.887fcca3.js"><link rel="prefetch" href="/assets/js/137.3862f1a9.js"><link rel="prefetch" href="/assets/js/138.93b6c4c8.js"><link rel="prefetch" href="/assets/js/139.80a50999.js"><link rel="prefetch" href="/assets/js/14.77a357cf.js"><link rel="prefetch" href="/assets/js/140.d1074f76.js"><link rel="prefetch" href="/assets/js/141.85b18cc2.js"><link rel="prefetch" href="/assets/js/142.cb6b72d6.js"><link rel="prefetch" href="/assets/js/143.a56b1457.js"><link rel="prefetch" href="/assets/js/144.b927ab29.js"><link rel="prefetch" href="/assets/js/145.6c52efcb.js"><link rel="prefetch" href="/assets/js/146.2b0bc759.js"><link rel="prefetch" href="/assets/js/147.04c80ed1.js"><link rel="prefetch" href="/assets/js/148.22c257f9.js"><link rel="prefetch" href="/assets/js/149.4102fe6d.js"><link rel="prefetch" href="/assets/js/15.b20eface.js"><link rel="prefetch" href="/assets/js/150.fbd84ad0.js"><link rel="prefetch" href="/assets/js/151.82d01746.js"><link rel="prefetch" href="/assets/js/153.991ccfdb.js"><link rel="prefetch" href="/assets/js/154.f5780494.js"><link rel="prefetch" href="/assets/js/155.84e4b57f.js"><link rel="prefetch" href="/assets/js/156.73f3536d.js"><link rel="prefetch" href="/assets/js/157.1343febe.js"><link rel="prefetch" href="/assets/js/158.3fa9ae95.js"><link rel="prefetch" href="/assets/js/159.d770b1d3.js"><link rel="prefetch" href="/assets/js/16.0c0e964c.js"><link rel="prefetch" href="/assets/js/160.2b5aad24.js"><link rel="prefetch" href="/assets/js/161.c7c96985.js"><link rel="prefetch" href="/assets/js/162.520d79d8.js"><link rel="prefetch" href="/assets/js/163.a1aa08e2.js"><link rel="prefetch" href="/assets/js/164.239b5abf.js"><link rel="prefetch" href="/assets/js/165.a6bbba0f.js"><link rel="prefetch" href="/assets/js/166.91593de5.js"><link rel="prefetch" href="/assets/js/167.172d089f.js"><link rel="prefetch" href="/assets/js/168.3abd1171.js"><link rel="prefetch" href="/assets/js/169.35144785.js"><link rel="prefetch" href="/assets/js/17.2bc62af2.js"><link rel="prefetch" href="/assets/js/170.fa760897.js"><link rel="prefetch" href="/assets/js/171.5c34c75e.js"><link rel="prefetch" href="/assets/js/172.60d07997.js"><link rel="prefetch" href="/assets/js/173.c0528a57.js"><link rel="prefetch" href="/assets/js/174.b97a027d.js"><link rel="prefetch" href="/assets/js/175.824a3e00.js"><link rel="prefetch" href="/assets/js/176.1f14606e.js"><link rel="prefetch" href="/assets/js/177.bd7daf05.js"><link rel="prefetch" href="/assets/js/178.8030f320.js"><link rel="prefetch" href="/assets/js/179.8965f445.js"><link rel="prefetch" href="/assets/js/18.79f1fd30.js"><link rel="prefetch" href="/assets/js/180.d1368663.js"><link rel="prefetch" href="/assets/js/181.13f7eeb2.js"><link rel="prefetch" href="/assets/js/182.4c73dca1.js"><link rel="prefetch" href="/assets/js/19.600bc21c.js"><link rel="prefetch" href="/assets/js/20.87510a7c.js"><link rel="prefetch" href="/assets/js/21.88d898de.js"><link rel="prefetch" href="/assets/js/22.63cca13e.js"><link rel="prefetch" href="/assets/js/23.00116180.js"><link rel="prefetch" href="/assets/js/24.d8730eb0.js"><link rel="prefetch" href="/assets/js/25.1259c93e.js"><link rel="prefetch" href="/assets/js/26.2de0cb16.js"><link rel="prefetch" href="/assets/js/27.b6421d5f.js"><link rel="prefetch" href="/assets/js/28.c119fb76.js"><link rel="prefetch" href="/assets/js/29.5b417507.js"><link rel="prefetch" href="/assets/js/3.a1971861.js"><link rel="prefetch" href="/assets/js/30.a5e0bd28.js"><link rel="prefetch" href="/assets/js/31.adc41183.js"><link rel="prefetch" href="/assets/js/32.3b7ccc1a.js"><link rel="prefetch" href="/assets/js/33.0750e776.js"><link rel="prefetch" href="/assets/js/34.46d6cdbb.js"><link rel="prefetch" href="/assets/js/35.a3fea112.js"><link rel="prefetch" href="/assets/js/36.1cab5fef.js"><link rel="prefetch" href="/assets/js/37.e70352f8.js"><link rel="prefetch" href="/assets/js/38.b3274de7.js"><link rel="prefetch" href="/assets/js/39.bb9c01bb.js"><link rel="prefetch" href="/assets/js/4.0581c077.js"><link rel="prefetch" href="/assets/js/40.7efa7600.js"><link rel="prefetch" href="/assets/js/41.9483e719.js"><link rel="prefetch" href="/assets/js/42.255b55f0.js"><link rel="prefetch" href="/assets/js/43.dd3d4733.js"><link rel="prefetch" href="/assets/js/44.5beb8a7f.js"><link rel="prefetch" href="/assets/js/45.851d8b41.js"><link rel="prefetch" href="/assets/js/46.f76b0306.js"><link rel="prefetch" href="/assets/js/47.d8ea8253.js"><link rel="prefetch" href="/assets/js/48.6b6b897f.js"><link rel="prefetch" href="/assets/js/49.763b7c06.js"><link rel="prefetch" href="/assets/js/50.7389aad8.js"><link rel="prefetch" href="/assets/js/51.beeb7464.js"><link rel="prefetch" href="/assets/js/52.f5e1ffe5.js"><link rel="prefetch" href="/assets/js/53.d82eeee0.js"><link rel="prefetch" href="/assets/js/54.6a43c030.js"><link rel="prefetch" href="/assets/js/55.69a78e4d.js"><link rel="prefetch" href="/assets/js/56.7a4ac5c4.js"><link rel="prefetch" href="/assets/js/57.86b5227f.js"><link rel="prefetch" href="/assets/js/58.4a397615.js"><link rel="prefetch" href="/assets/js/59.d2d11f70.js"><link rel="prefetch" href="/assets/js/6.0f62f2df.js"><link rel="prefetch" href="/assets/js/60.64f37535.js"><link rel="prefetch" href="/assets/js/61.0e38ddba.js"><link rel="prefetch" href="/assets/js/62.86493e41.js"><link rel="prefetch" href="/assets/js/63.ef9f049a.js"><link rel="prefetch" href="/assets/js/64.afb5b261.js"><link rel="prefetch" href="/assets/js/65.aab6b530.js"><link rel="prefetch" href="/assets/js/66.d7247615.js"><link rel="prefetch" href="/assets/js/67.34dfab0c.js"><link rel="prefetch" href="/assets/js/68.3dc0aeb1.js"><link rel="prefetch" href="/assets/js/69.efd2ca55.js"><link rel="prefetch" href="/assets/js/7.132247dd.js"><link rel="prefetch" href="/assets/js/70.95ca3d3c.js"><link rel="prefetch" href="/assets/js/71.2c7a4967.js"><link rel="prefetch" href="/assets/js/72.1a251716.js"><link rel="prefetch" href="/assets/js/73.61bf96fa.js"><link rel="prefetch" href="/assets/js/74.5ab8265a.js"><link rel="prefetch" href="/assets/js/75.39e30ca0.js"><link rel="prefetch" href="/assets/js/76.5e9f4bd6.js"><link rel="prefetch" href="/assets/js/77.fdb79ef7.js"><link rel="prefetch" href="/assets/js/78.dceb341b.js"><link rel="prefetch" href="/assets/js/79.160031a0.js"><link rel="prefetch" href="/assets/js/8.99d6c358.js"><link rel="prefetch" href="/assets/js/80.4f448000.js"><link rel="prefetch" href="/assets/js/81.b5ff1521.js"><link rel="prefetch" href="/assets/js/82.1ae54b0d.js"><link rel="prefetch" href="/assets/js/83.b990d83c.js"><link rel="prefetch" href="/assets/js/84.1dc79672.js"><link rel="prefetch" href="/assets/js/85.013efb36.js"><link rel="prefetch" href="/assets/js/86.efeaabae.js"><link rel="prefetch" href="/assets/js/87.5b68eda4.js"><link rel="prefetch" href="/assets/js/88.e2ff0d6d.js"><link rel="prefetch" href="/assets/js/89.9927c740.js"><link rel="prefetch" href="/assets/js/9.bd4c7b85.js"><link rel="prefetch" href="/assets/js/90.26fc1d5e.js"><link rel="prefetch" href="/assets/js/91.ea0ad76d.js"><link rel="prefetch" href="/assets/js/92.e8d90ded.js"><link rel="prefetch" href="/assets/js/93.9defcb19.js"><link rel="prefetch" href="/assets/js/94.cacaa0f8.js"><link rel="prefetch" href="/assets/js/95.45034e7f.js"><link rel="prefetch" href="/assets/js/96.d6c33d64.js"><link rel="prefetch" href="/assets/js/97.c1a23818.js"><link rel="prefetch" href="/assets/js/98.48fa9b8f.js"><link rel="prefetch" href="/assets/js/99.539b176e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.166fb109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">刘一笔的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/LearnTech/" class="nav-link">
  技术学习
</a></div><div class="nav-item"><a href="/Projects/" class="nav-link router-link-active">
  项目记录
</a></div><div class="nav-item"><a href="/LeetCode/" class="nav-link">
  LeetCode
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  阅读记录
</a></div><div class="nav-item"><a href="/IdeaPills/" class="nav-link">
  闪念
</a></div><div class="nav-item"><a href="/CodingTool/" class="nav-link">
  编程工具
</a></div><div class="nav-item"><a href="https://github.com/OrangeSAM" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.lxchuan12.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  若川博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://wind-nest.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  森淼
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.mybeifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  北风
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/LearnTech/" class="nav-link">
  技术学习
</a></div><div class="nav-item"><a href="/Projects/" class="nav-link router-link-active">
  项目记录
</a></div><div class="nav-item"><a href="/LeetCode/" class="nav-link">
  LeetCode
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  阅读记录
</a></div><div class="nav-item"><a href="/IdeaPills/" class="nav-link">
  闪念
</a></div><div class="nav-item"><a href="/CodingTool/" class="nav-link">
  编程工具
</a></div><div class="nav-item"><a href="https://github.com/OrangeSAM" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友链" class="dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.lxchuan12.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  若川博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://wind-nest.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  森淼
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.mybeifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  北风
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>项目记录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Projects/make_blog_with_vuepress.html" class="sidebar-link">VuePress搭建博客</a></li><li><a href="/Projects/yibi_calendar.html" class="sidebar-link">一笔日历</a></li><li><a href="/Projects/page_screenshot.html" aria-current="page" class="active sidebar-link">网页截图的两种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Projects/page_screenshot.html#需求" class="sidebar-link">需求</a></li><li class="sidebar-sub-header"><a href="/Projects/page_screenshot.html#实现" class="sidebar-link">实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Projects/page_screenshot.html#html2canvas" class="sidebar-link">html2canvas</a></li><li class="sidebar-sub-header"><a href="/Projects/page_screenshot.html#puppeteer" class="sidebar-link">puppeteer</a></li></ul></li></ul></li><li><a href="/Projects/node_getArticle.html" class="sidebar-link">Node.js 爬取微信文章</a></li><li><a href="/Projects/node_todo.html" class="sidebar-link">Node.js 实现命令行Todo</a></li><li><a href="/Projects/puppeteer_get_image.html" class="sidebar-link">Puppeteer 获取前端页面数据</a></li><li><a href="/Projects/music_bulk_download.html" class="sidebar-link">批量下载音乐网站音乐</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue造轮子</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Projects/vue_wheels_start.html" class="sidebar-link">Vue造轮子之开篇言</a></li><li><a href="/Projects/vue_wheels_button.html" class="sidebar-link">Vue造轮子之button组件</a></li><li><a href="/Projects/vue_wheels_layout.html" class="sidebar-link">Vue造轮子之container组件</a></li><li><a href="/Projects/vue_wheels_grid.html" class="sidebar-link">Vue造轮子之layout组件</a></li><li><a href="/Projects/vue_wheels_input.html" class="sidebar-link">Vue造轮子之input组件</a></li><li><a href="/Projects/vue_wheels_toast.html" class="sidebar-link">Vue造轮子之toast组件</a></li><li><a href="/Projects/vue_wheels_popover.html" class="sidebar-link">Vue造轮子之popover组件</a></li><li><a href="/Projects/vue_wheels_tabs.html" class="sidebar-link">Vue造轮子之tabs组件</a></li><li><a href="/Projects/vue_wheels_compos_name.html" class="sidebar-link">Vue组件中的名称探究</a></li><li><a href="/Projects/vue_wheels_primary_conclusion.html" class="sidebar-link">造轮子阶段一总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="需求"><a href="#需求" class="header-anchor">#</a> 需求</h2> <p>上礼拜做了一个需求：将网页上的内容按顺序保存为图片，并上传至OSS返回URL给后端生成PPT。这里主要分享如何将网页的上的内容保存为图片。
至于保存为图片之后的事，比如直接保存为本地，或者上传至服务器等，这里就不探索了。</p> <h2 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h2> <h3 id="html2canvas"><a href="#html2canvas" class="header-anchor">#</a> html2canvas</h3> <p>html2canvas是一个实现网页截图的库，允许你直接在用户浏览器上获取网页的截图或部分内容。屏幕截图是基于DOM的，因为它不做实际的屏幕截图，而是基于页面上可用的信息构建屏幕截图，因此它可能不是100%准确的。即，它只能正确地描述它所理解的属性，这意味着有许多CSS属性不起作用，比如动画。</p> <p>如官网所说的，它的使用非常之简单。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> html2canvas
<span class="token function">import</span> html2canvas from <span class="token string">'html2canvas'</span>

html2canvas<span class="token punctuation">(</span>document.body<span class="token punctuation">)</span>.then<span class="token punctuation">(</span>function<span class="token punctuation">(</span>canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document.body.appendChild<span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实际上只要一行代码就能拿到转换好的canvas数据，<code>await html2canvas(the element you want to convert)</code>。</p> <blockquote><p>我的示例代码</p></blockquote> <div class="language-HTML line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>shot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click me to convert<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>below here are something that i want to take them to screenshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>尤雨溪说，看不懂文档你就回家去喂猪吧。IE说，你们都看我干嘛。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">shot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> ele <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">&quot;wrap&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> canvas <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">html2canvas</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">debugBase64</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 这个方法会将渲染好的图片在新页面打开。</span>
<span class="token function">debugBase64</span><span class="token punctuation">(</span><span class="token parameter">base64URL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> win <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  win<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>
    <span class="token string">'&lt;iframe src=&quot;'</span> <span class="token operator">+</span>
      base64URL <span class="token operator">+</span>
      <span class="token string">'&quot; frameborder=&quot;0&quot; style=&quot;border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;&quot; allowfullscreen&gt;&lt;/iframe&gt;'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>效果如下图所示：
<img src="https://i.loli.net/2020/05/17/8GWBVvXzb4OfLk5.png" alt=""></p> <p>但实际上我在这里踩了大坑，我需要渲染的东西和公式有关，使用了<code>mathjax</code>渲染公式，其底层实现是svg，这导致我的公式无法被转换成canvas。（当然也有可能是其他原因导致的，欢迎指点）对此，就只好上绝招了，使用puppeteer。</p> <h3 id="puppeteer"><a href="#puppeteer" class="header-anchor">#</a> puppeteer</h3> <p>之前有篇文章就写过使用这个node库将网页渲染成PDF并保存到本地，详见<a href="/Projects/node_getArticle.html">文章</a>。渲染成PDF只是这个库的一个小功能，比如还可以用它截图。</p> <p><code>screenshot</code>是<code>page</code>实例中的一个方法，主要有以下配置项。可以全屏截图，也可以提供坐标和长宽对指定区域截图。
<img src="https://i.loli.net/2020/05/17/qTpxBc3mKh59LSI.png" alt=""></p> <p>使用上倒是其次，安装puppeteer库倒是更麻烦点，因为这个需要下载一个完整的chrome应用，如果因为网络原因下载不了。可以在package.json中只安装其核心即<code>puppeteer-core</code>。在使用的时候自行配置本地的下载好chrome程序。这里不展开讲，可以搜索得到相关解决方案。以对知乎官网全屏截图为例。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> puppeteer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;puppeteer-core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> puppeteer<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    executablePath<span class="token operator">:</span> <span class="token string">&quot;./chrome-win/chrome.exe&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;https://zhihu.com&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    waitUntil<span class="token operator">:</span> <span class="token string">'networkidle0'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">setViewport</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">1980</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">1080</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">screenshot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;zhihu.png&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;jpeg&quot;</span><span class="token punctuation">,</span>
    quality<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    fullPage<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>声明<code>browser</code>实例就配置了相对路径的本地应用，<code>executablePath: &quot;./chrome-win/chrome.exe&quot;</code>。有些单页面应用或许还要配置等待所有请求加载完毕，即<code>waitUntil: 'networkidle0'</code>。</p> <p>截图效果如下：
<img src="https://i.loli.net/2020/05/17/FspBZGebKfudtWM.png" alt=""></p> <p>而如果要对指定区域截图，就要知道截图区域的坐标和长宽。一般来说，需要截图的部分都会有一个完整的DOM元素来渲染，如果不是，那就把它写在一个DOM元素内。</p> <p>而对于如何获取一个DOM元素在页面上的位置，需要用到这几个DOM中的属性，<code>offsetleft</code> <code>offsettop</code> <code>offsetWidth</code> <code>offsetheight</code>。如果布局上有特殊的情况，那坐标的获取可能还需要特殊处理。</p> <p>坐标拿到了，截图也跑通了。但似乎还有另一个问题：坐标只是存在于页面上，而需要坐标的是node端。如何构建其node和页面的桥梁将坐标传递给node。这就要用到page实例中的<code>evaluate</code>方法，该方法可以传递两个参数：<code>pageFunction</code>和<code>args</code>。前者是要在当前页面实例执行的方法，后者是要传递给当前方法的参数。用在这里就是，页面上将获取好的元素坐标信息放到window对象中，那在<code>pageFunction</code>中return <code>window</code>对象上的相关信息就好了。有时还需要将相关数据传递到页面供其使用，这个时候就是用第二个参数。代码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// eslint-disable-next-line no-undef</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>elePostion
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>拿到坐标后就可以依次截图了，截图可以保存为本地文件，也可以拿到该图片的buffer。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">一笔写于:</span> <span class="time">9/11/2020, 2:57:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Projects/yibi_calendar.html" class="prev">
        一笔日历
      </a></span> <span class="next"><a href="/Projects/node_getArticle.html">
        Node.js 爬取微信文章
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div class="wrap" data-v-6046a539>
  a hint
</div></div></div>
    <script src="/assets/js/app.43ad61d0.js" defer></script><script src="/assets/js/2.1fc9df47.js" defer></script><script src="/assets/js/152.1f405d78.js" defer></script><script src="/assets/js/5.cfe5c241.js" defer></script>
  </body>
</html>
